(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(13),r=t.n(a),u=t(0),c=t.n(u),o=t(2),l=t(3),i=t.n(l),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},h=(t(36),function(e){var n=e.value,t=e.onChangeFunction;return c.a.createElement("input",{value:n,onChange:t})}),b=function(e){var n=e.name,t=e.number,a=e.nameOnChange,r=e.numberOnChange,u=e.onSubmission;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:u},c.a.createElement("div",null,"Name: ",c.a.createElement("input",{value:n,onChange:a})),c.a.createElement("div",null,"Number: ",c.a.createElement("input",{value:t,onChange:r})),c.a.createElement("button",{type:"submit"},"Add")))},v=function(e){var n=e.persons,t=e.deleteFunction;return c.a.createElement("div",null,n.map((function(e,n){return c.a.createElement("div",{key:n,style:{display:"flex"}},c.a.createElement("p",null,e.name," ",e.number," "),c.a.createElement("button",{"data-key":e.id,"data-name":e.name,onClick:t,style:{height:"20px",marginLeft:"10px",marginTop:"15px"}},"Delete"))})))},p=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],r=Object(u.useState)(""),l=Object(o.a)(r,2),i=l[0],m=l[1],p=Object(u.useState)(""),E=Object(o.a)(p,2),g=E[0],O=E[1],j=Object(u.useState)(""),C=Object(o.a)(j,2),y=C[0],S=C[1],k=Object(u.useState)(t),w=Object(o.a)(k,2),N=w[0],x=w[1],T=Object(u.useState)(null),F=Object(o.a)(T,2),A=F[0],D=F[1],I=Object(u.useState)(null),L=Object(o.a)(I,2),J=L[0],B=L[1];Object(u.useEffect)((function(){s().then((function(e){a(e),x(e)}))}),[]);var P=function(e){var n=e.message,t=e.className;return null===n?null:c.a.createElement("div",{className:t},n)};return c.a.createElement("div",null,c.a.createElement(P,{message:J,className:"notification"}),c.a.createElement(P,{message:A,className:"error"}),c.a.createElement("h2",null,"Phonebook"),c.a.createElement("h3",null,"Search the phonebook"),c.a.createElement(h,{value:y,onChangeFunction:function(e){S(e.target.value);var n=e.target.value,a=t.filter((function(e){return 0===e.name.toLowerCase().indexOf(n.toLowerCase())}));x(a)}}),c.a.createElement("h3",null,"Add to the phonebook"),c.a.createElement(b,{name:i,number:g,nameOnChange:function(e){m(e.target.value)},numberOnChange:function(e){O(e.target.value)},onSubmission:function(e){e.preventDefault();var n=t.find((function(e){return e.name===i})),r={name:i,number:g};n&&window.confirm("".concat(i," is already added to the phone book. \n    Replace the old number with the new number?"))?f(r).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),x(t.map((function(t){return t.id!==n.id?t:e}))),B("Updated ".concat(r.name)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){D("Information of ".concat(r.name," has already been removed from the server")),setTimeout((function(){D(null)}),5e3)})):f(r).then((function(e){a(t.concat(e)),x(t.concat(e)),B("Added ".concat(r.name)),setTimeout((function(){B(null)}),5e3)}))}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(v,{persons:N,deleteFunction:function(e){var n=e.target.dataset.name;if(window.confirm("Delete ".concat(n,"?"))){var r=e.target.dataset.key;d(r).then((function(e){var n=t.filter((function(e){return e.id!==r}));a(n),x(n)})).catch((function(e){D("Information of ".concat(n," has already been removed from the server")),setTimeout((function(){D(null)}),5e3)}))}}}))};r.a.render(c.a.createElement(p,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.31e75199.chunk.js.map